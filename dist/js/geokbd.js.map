{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 78dc33190248b29ebf4b","webpack:///./src/index.ts","webpack:///./src/defaults.ts","webpack:///./src/themes/default.ts","webpack:///./src/themes/abstract.ts","webpack:///./src/keypress.ts"],"names":["defaults_1","require","default_1","keypress_1","GeoKBD","config","createMergedConfig","registerDefaultThemeIfRequired","initializeTheme","onKeydownHandler","bind","initialized","target","warn","isTextElement","addEventListener","activeTheme","onAttach","removeEventListener","onDetach","Object","keys","DEFAULT_CONFIG","map","defaultValue","configKey","toMergeWith","key","value","typesMatch","reduce","mergedConfig","keyValue","onConfigurationChange","theme","registerTheme","default","setConfig","enabled","evt","isSpecialKeyPressed","hotkey","toggleEnabled","stopEvent","isAlphabetKeyPressed","isGeorgianKeyPressed","name","themes","set","ThemeClass","get","Map","message","console","arg1","arg2","metaKey","ctrlKey","altKey","test","code","el","type","preventDefault","module","exports","defineProperty","DEFAULT_THEME","DEFAULT_HOTKEY","DEFAULT_ENABLED","abstract_1","TEXT_ENABLED","TEXT_DISABLED","CLASSNAME","CLASSNAME_STATE","CLASSNAME_HOTKEY","CLASSNAME_HIDDEN","CLASSNAME_VISIBLE","TEMPLATE","join","DefaultTheme","setVisibility","debounce","isVisible","root","Element","className","handleFocusEvent","handleBlurEvent","createDivWithHtml","state","querySelector","setHotkeyText","setEnabledText","document","body","appendChild","remove","undefined","innerHTML","isEnabled","html","createElement","fn","wait","timeout","context","args","arguments","later","apply","clearTimeout","setTimeout","AbstractTheme","ALPHABET","BASE_INDEX","convertChar","charIndex","char","String","fromCharCode","indexOf","isSelectionSupported","selectionStart","selectionEnd","getInputSelection","start","end","setInputSelection","offset","blur","focus","dispatchCustomKeypressEvent","charCode","customEvent","KeyboardEvent","location","repeat","dispatchEvent","handleKeypress","charCodeAt","mappedCharCode","sel","val","slice"],"mappings":"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","file":"geokbd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"geokbd\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"geokbd\"] = factory();\n\telse\n\t\troot[\"geokbd\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 78dc33190248b29ebf4b\n **/","\"use strict\";\nconst defaults_1 = require(\"./defaults\");\nconst default_1 = require(\"./themes/default\");\nconst keypress_1 = require(\"./keypress\");\nclass GeoKBD {\n    static initialize(config = {}) {\n        this.createMergedConfig(config);\n        this.registerDefaultThemeIfRequired();\n        this.initializeTheme();\n        this.onKeydownHandler = this.onKeydownHandler.bind(this);\n        this.initialized = true;\n    }\n    static attach(target) {\n        if (!this.initialized) {\n            warn(\"attach() can't be called until initialize().\");\n            return false;\n        }\n        if (!isTextElement(target)) {\n            warn('only works for <input> and <textarea> elements.');\n            return false;\n        }\n        target.addEventListener('keydown', this.onKeydownHandler);\n        if (this.activeTheme) {\n            this.activeTheme.onAttach(target);\n        }\n        return target;\n    }\n    static detach(target) {\n        target.removeEventListener('keydown', this.onKeydownHandler);\n        if (this.activeTheme) {\n            this.activeTheme.onDetach(target);\n        }\n    }\n    static createMergedConfig(config) {\n        this.config = Object.keys(defaults_1.DEFAULT_CONFIG)\n            .map(configKey => {\n            let defaultValue = defaults_1.DEFAULT_CONFIG[configKey];\n            let toMergeWith = config[configKey];\n            return {\n                key: configKey,\n                value: typesMatch(defaultValue, toMergeWith)\n                    ? toMergeWith\n                    : defaultValue\n            };\n        })\n            .reduce((mergedConfig, keyValue) => {\n            mergedConfig[keyValue.key] = keyValue.value;\n            return mergedConfig;\n        }, {});\n    }\n    static setConfig(key, value) {\n        if (typesMatch(this.config[key], value)) {\n            this.config[key] = value;\n            if (this.activeTheme) {\n                this.activeTheme.onConfigurationChange(this.config);\n            }\n        }\n    }\n    static registerDefaultThemeIfRequired() {\n        if (this.config.theme === 'default') {\n            this.registerTheme('default', default_1.default);\n        }\n    }\n    static toggleEnabled() {\n        this.setConfig('enabled', !this.config.enabled);\n    }\n    static onKeydownHandler(evt) {\n        if (isSpecialKeyPressed(evt)) {\n            return;\n        }\n        if (this.config.hotkey === evt.key) {\n            this.toggleEnabled();\n            stopEvent(evt);\n            return;\n        }\n        if (!this.config.enabled ||\n            !isAlphabetKeyPressed(evt) ||\n            isGeorgianKeyPressed(evt)) {\n            return;\n        }\n        stopEvent(evt);\n        keypress_1.default(evt);\n    }\n    static registerTheme(name, theme) {\n        this.themes.set(name, theme);\n    }\n    static initializeTheme() {\n        const ThemeClass = this.themes.get(this.config.theme);\n        if (typeof ThemeClass !== 'function') {\n            warn(\"Can't instantiate theme.\");\n            return;\n        }\n        this.activeTheme = new ThemeClass(this.config);\n    }\n}\nGeoKBD.initialized = false;\nGeoKBD.themes = new Map();\nfunction warn(message) {\n    console.warn('[geokbd] - ' + message);\n}\nfunction typesMatch(arg1, arg2) {\n    return typeof arg1 === typeof arg2;\n}\nfunction isSpecialKeyPressed(evt) {\n    return evt.metaKey || evt.ctrlKey || evt.altKey;\n}\nfunction isAlphabetKeyPressed(evt) {\n    return /^Key[A-Z]$/.test(evt.code);\n}\nfunction isGeorgianKeyPressed(evt) {\n    return /^[ა-ჰ]+$/.test(evt.key);\n}\nfunction isTextElement(el) {\n    return /(text)(area)?/.test(el.type);\n}\nfunction stopEvent(evt) {\n    evt.preventDefault();\n}\nmodule.exports = GeoKBD;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ts-loader!./src/index.ts\n **/","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_THEME = 'default';\nexports.DEFAULT_HOTKEY = '~';\nexports.DEFAULT_ENABLED = true;\nexports.DEFAULT_CONFIG = {\n    theme: exports.DEFAULT_THEME,\n    hotkey: exports.DEFAULT_HOTKEY,\n    enabled: exports.DEFAULT_ENABLED\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ts-loader!./src/defaults.ts\n **/","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst abstract_1 = require(\"./abstract\");\nconst TEXT_ENABLED = 'ჩართულია';\nconst TEXT_DISABLED = 'გამორთულია';\nconst CLASSNAME = 'geokbd--statusMessage';\nconst CLASSNAME_STATE = CLASSNAME + '-state';\nconst CLASSNAME_HOTKEY = CLASSNAME + '-hotkey';\nconst CLASSNAME_HIDDEN = CLASSNAME + ' geokbd--hidden';\nconst CLASSNAME_VISIBLE = CLASSNAME + ' geokbd--visible';\nconst TEMPLATE = [\n    '<div class=\"' + CLASSNAME + '-text\">',\n    'ქართული კლავიატურა: <u class=\"' + CLASSNAME_STATE + '\"></u><br>',\n    'ჩართვა/გამორთვა კლავიშით (\\'<span class=\"' +\n        CLASSNAME_HOTKEY +\n        '\"></span>\\')',\n    '</div>'\n].join('');\nclass DefaultTheme extends abstract_1.default {\n    constructor(config) {\n        super(config);\n        this.setVisibility = debounce(function (isVisible) {\n            if (this.root instanceof Element) {\n                this.root.className = isVisible ? CLASSNAME_VISIBLE : CLASSNAME_HIDDEN;\n            }\n        }, 100);\n        this.handleFocusEvent = this.handleFocusEvent.bind(this);\n        this.handleBlurEvent = this.handleBlurEvent.bind(this);\n        this.root = createDivWithHtml(TEMPLATE);\n        this.state = this.root.querySelector('.' + CLASSNAME_STATE);\n        this.hotkey = this.root.querySelector('.' + CLASSNAME_HOTKEY);\n        this.root.className = CLASSNAME;\n        this.setHotkeyText(config.hotkey);\n        this.setEnabledText(config.enabled);\n        document.body.appendChild(this.root);\n    }\n    onAttach(target) {\n        target.addEventListener('focus', this.handleFocusEvent);\n        target.addEventListener('blur', this.handleBlurEvent);\n    }\n    onConfigurationChange(config) {\n        this.setHotkeyText(config.hotkey);\n        this.setEnabledText(config.enabled);\n    }\n    onDetach(target) {\n        target.removeEventListener('focus', this.handleFocusEvent);\n        target.removeEventListener('blur', this.handleBlurEvent);\n    }\n    onDestroy() {\n        if (this.root instanceof Element) {\n            this.root.remove();\n        }\n        this.root = undefined;\n        this.state = undefined;\n        this.hotkey = undefined;\n    }\n    handleFocusEvent() {\n        this.setVisibility(true);\n    }\n    handleBlurEvent() {\n        this.setVisibility(false);\n    }\n    setHotkeyText(hotkey) {\n        if (this.hotkey instanceof Element) {\n            this.hotkey.innerHTML = hotkey;\n        }\n    }\n    setEnabledText(isEnabled) {\n        if (this.state instanceof Element) {\n            this.state.innerHTML = isEnabled ? TEXT_ENABLED : TEXT_DISABLED;\n        }\n    }\n}\nfunction createDivWithHtml(html) {\n    let el;\n    el = document.createElement('div');\n    el.innerHTML = html;\n    return el;\n}\nfunction debounce(fn, wait) {\n    let timeout;\n    return function () {\n        const context = this;\n        const args = arguments;\n        const later = function () {\n            fn.apply(context, args);\n        };\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n    };\n}\nexports.default = DefaultTheme;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ts-loader!./src/themes/default.ts\n **/","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass AbstractTheme {\n    constructor(config) { }\n}\nexports.default = AbstractTheme;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ts-loader!./src/themes/abstract.ts\n **/","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ALPHABET = 'abgdevzTiklmnopJrstufqRySCcZwWxjh';\nconst BASE_INDEX = 4304;\nfunction convertChar(charIndex) {\n    const char = String.fromCharCode(charIndex);\n    if (ALPHABET.indexOf(char) >= 0) {\n        return BASE_INDEX + ALPHABET.indexOf(char);\n    }\n    return charIndex;\n}\nfunction isSelectionSupported(el) {\n    return (typeof el.selectionStart === 'number' && typeof el.selectionEnd === 'number');\n}\nfunction getInputSelection(el) {\n    let start = 0;\n    let end = 0;\n    if (isSelectionSupported(el)) {\n        start = el.selectionStart;\n        end = el.selectionEnd;\n    }\n    return { start, end };\n}\nfunction setInputSelection(el, offset) {\n    if (isSelectionSupported(el)) {\n        el.selectionStart = offset.start;\n        el.selectionEnd = offset.end;\n    }\n    // A little 'hack' to keep natural browser behavior while typing\n    el.blur();\n    el.focus();\n}\nfunction dispatchCustomKeypressEvent(evt, charCode) {\n    const customEvent = new KeyboardEvent('keypress', {\n        key: String.fromCharCode(charCode),\n        // keyCode: charCode,\n        // charCode: charCode,\n        code: evt.code,\n        location: evt.location,\n        repeat: evt.repeat\n    });\n    evt.target.dispatchEvent(customEvent);\n}\nfunction handleKeypress(evt) {\n    const el = evt.target;\n    const charCode = evt.key.charCodeAt(0);\n    const mappedCharCode = convertChar(charCode);\n    // Don't take any action if conversion didn't happen\n    if (charCode === mappedCharCode) {\n        return;\n    }\n    // Insert converted char\n    const sel = getInputSelection(el);\n    const val = el.value;\n    el.value =\n        val.slice(0, sel.start) +\n            String.fromCharCode(mappedCharCode) +\n            val.slice(sel.end);\n    // Move caret to correct position\n    setInputSelection(el, { start: sel.start + 1, end: sel.start + 1 });\n    dispatchCustomKeypressEvent(evt, mappedCharCode);\n}\nexports.default = handleKeypress;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ts-loader!./src/keypress.ts\n **/"],"sourceRoot":""}