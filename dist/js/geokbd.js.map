{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 94c4a06bd66572541209","webpack:///./src/index.ts","webpack:///./src/defaults.ts","webpack:///./src/themes/abstract.ts","webpack:///./src/themes/default.ts","webpack:///./src/keypress.ts"],"names":["defaults_1","require","abstract_1","default_1","keypress_1","GeoKBD","initialize","config","createReactiveConfig","mergeWithDefaultConfig","registerDefaultThemeIfRequired","initializeTheme","onKeydownHandler","bind","initialized","attach","target","warn","isTextElement","addEventListener","activeTheme","onAttach","detach","removeEventListener","onDetach","_this","shadowConfig","Object","keys","DEFAULT_CONFIG","forEach","propName","defineProperty","get","set","newValue","default","onConfigurationChange","theme","registerTheme","toggleEnabled","enabled","evt","elementConfig","isSpecialKeyPressed","hotkey","key","stopEvent","isAlphabetKeyPressed","isGeorgianKeyPressed","name","themes","themeClass","message","console","test","code","metaKey","ctrlKey","altKey","el","type","preventDefault","mergeFrom","merged","reduce","mergedConfig","hasOwnProperty","module","exports","value","DEFAULT_THEME","DEFAULT_HOTKEY","DEFAULT_ENABLED","AbstractTheme","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","__","constructor","prototype","create","TEXT_ENABLED","TEXT_DISABLED","CLASSNAME","CLASSNAME_STATE","CLASSNAME_HOTKEY","CLASSNAME_HIDDEN","CLASSNAME_VISIBLE","TEMPLATE","join","DefaultTheme","_super","call","setVisibility","debounce","isVisible","root","Element","className","handleFocusEvent","handleBlurEvent","createDivWithHtml","state","querySelector","setHotkeyText","setEnabledText","document","body","appendChild","onDestroy","remove","undefined","innerHTML","isEnabled","html","createElement","fn","wait","timeout","context","args","arguments","later","apply","clearTimeout","setTimeout","ALPHABET","BASE_INDEX","convertChar","charIndex","char","String","fromCharCode","indexOf","isSelectionSupported","selectionStart","selectionEnd","getInputSelection","start","end","setInputSelection","offset","blur","focus","dispatchCustomKeypressEvent","charCode","customEvent","KeyboardEvent","location","repeat","dispatchEvent","handleKeypress","charCodeAt","mappedCharCode","sel","val","slice"],"mappings":"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","file":"geokbd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"geokbd\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"geokbd\"] = factory();\n\telse\n\t\troot[\"geokbd\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 94c4a06bd66572541209\n **/","\"use strict\";\nvar defaults_1 = require(\"./defaults\");\nvar abstract_1 = require(\"./themes/abstract\");\nvar default_1 = require(\"./themes/default\");\nvar keypress_1 = require(\"./keypress\");\nvar GeoKBD = (function () {\n    function GeoKBD() {\n    }\n    GeoKBD.initialize = function (config) {\n        if (config === void 0) { config = {}; }\n        this.createReactiveConfig(mergeWithDefaultConfig(config));\n        this.registerDefaultThemeIfRequired();\n        this.initializeTheme();\n        this.onKeydownHandler = this.onKeydownHandler.bind(this);\n        this.initialized = true;\n    };\n    GeoKBD.attach = function (target, config) {\n        if (config === void 0) { config = {}; }\n        if (!this.initialized) {\n            warn(\"attach() can't be called until initialize().\");\n            return false;\n        }\n        if (!isTextElement(target)) {\n            warn('only works for <input> and <textarea> elements.');\n            return false;\n        }\n        target.GeoKBD = config;\n        target.addEventListener('keydown', this.onKeydownHandler);\n        if (GeoKBD.activeTheme) {\n            GeoKBD.activeTheme.onAttach(target);\n        }\n        return target;\n    };\n    GeoKBD.detach = function (target) {\n        delete target.GeoKBD;\n        target.removeEventListener('keydown', this.onKeydownHandler);\n        if (GeoKBD.activeTheme) {\n            GeoKBD.activeTheme.onDetach(target);\n        }\n    };\n    GeoKBD.createReactiveConfig = function (config) {\n        var _this = this;\n        this.shadowConfig = config;\n        Object.keys(defaults_1.DEFAULT_CONFIG).forEach(function (propName) {\n            Object.defineProperty(_this.config, propName, {\n                get: function () {\n                    return GeoKBD.shadowConfig[propName];\n                },\n                set: function (newValue) {\n                    GeoKBD.shadowConfig[propName] = newValue;\n                    if (GeoKBD.activeTheme instanceof abstract_1.default) {\n                        GeoKBD.activeTheme.onConfigurationChange(GeoKBD.config);\n                    }\n                }\n            });\n        });\n    };\n    GeoKBD.registerDefaultThemeIfRequired = function () {\n        if (this.config.theme === 'default') {\n            this.registerTheme('default', default_1.default);\n        }\n    };\n    GeoKBD.toggleEnabled = function () {\n        this.config.enabled = !this.config.enabled;\n    };\n    GeoKBD.onKeydownHandler = function (evt) {\n        var elementConfig = evt.target.GeoKBD;\n        if (isSpecialKeyPressed(evt) || !elementConfig) {\n            return;\n        }\n        if (this.config.hotkey === evt.key) {\n            this.toggleEnabled();\n            stopEvent(evt);\n            return;\n        }\n        if (!this.config.enabled || !isAlphabetKeyPressed(evt) || isGeorgianKeyPressed(evt)) {\n            return;\n        }\n        stopEvent(evt);\n        keypress_1.default(evt);\n    };\n    GeoKBD.registerTheme = function (name, theme) {\n        this.themes[name] = theme;\n    };\n    GeoKBD.initializeTheme = function () {\n        var themeClass = this.themes[this.config.theme];\n        if (typeof themeClass !== 'function') {\n            warn(\"Can't instantiate theme.\");\n            return;\n        }\n        this.activeTheme = new themeClass(this.config);\n    };\n    return GeoKBD;\n}());\nGeoKBD.themes = {};\nGeoKBD.config = defaults_1.DEFAULT_CONFIG;\nGeoKBD.shadowConfig = {};\nGeoKBD.initialized = false;\nfunction warn(message) {\n    console.warn('[geokbd] - ' + message);\n}\nfunction isAlphabetKeyPressed(evt) {\n    return /^Key[A-Z]$/.test(evt.code);\n}\nfunction isGeorgianKeyPressed(evt) {\n    return /^[ა-ჰ]+$/.test(evt.key);\n}\nfunction isSpecialKeyPressed(evt) {\n    return evt.metaKey || evt.ctrlKey || evt.altKey;\n}\nfunction isTextElement(el) {\n    return /(text)(area)?/.test(el.type);\n}\nfunction stopEvent(evt) {\n    evt.preventDefault();\n}\nfunction mergeWithDefaultConfig(mergeFrom) {\n    var merged = Object.keys(defaults_1.DEFAULT_CONFIG).reduce(function (mergedConfig, propName) {\n        mergedConfig[propName] = mergeFrom.hasOwnProperty(propName)\n            ? mergeFrom[propName]\n            : defaults_1.DEFAULT_CONFIG[propName];\n        return mergedConfig;\n    }, {});\n    return merged;\n}\nmodule.exports = GeoKBD;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ts-loader!./src/index.ts\n **/","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_THEME = 'default';\nexports.DEFAULT_HOTKEY = '~';\nexports.DEFAULT_ENABLED = true;\nexports.DEFAULT_CONFIG = {\n    theme: exports.DEFAULT_THEME,\n    hotkey: exports.DEFAULT_HOTKEY,\n    enabled: exports.DEFAULT_ENABLED\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ts-loader!./src/defaults.ts\n **/","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar AbstractTheme = (function () {\n    function AbstractTheme(config) {\n    }\n    return AbstractTheme;\n}());\nexports.default = AbstractTheme;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ts-loader!./src/themes/abstract.ts\n **/","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar abstract_1 = require(\"./abstract\");\nvar TEXT_ENABLED = 'ჩართულია';\nvar TEXT_DISABLED = 'გამორთულია';\nvar CLASSNAME = 'geokbd--statusMessage';\nvar CLASSNAME_STATE = CLASSNAME + '-state';\nvar CLASSNAME_HOTKEY = CLASSNAME + '-hotkey';\nvar CLASSNAME_HIDDEN = CLASSNAME + ' geokbd--hidden';\nvar CLASSNAME_VISIBLE = CLASSNAME + ' geokbd--visible';\nvar TEMPLATE = [\n    '<div class=\"' + CLASSNAME + '-text\">',\n    'ქართული კლავიატურა: <u class=\"' + CLASSNAME_STATE + '\"></u><br>',\n    'ჩართვა/გამორთვა კლავიშით (\\'<span class=\"' +\n        CLASSNAME_HOTKEY +\n        '\"></span>\\')',\n    '</div>'\n].join('');\nvar DefaultTheme = (function (_super) {\n    __extends(DefaultTheme, _super);\n    function DefaultTheme(config) {\n        var _this = _super.call(this, config) || this;\n        _this.setVisibility = debounce(function (isVisible) {\n            if (this.root instanceof Element) {\n                this.root.className = isVisible ? CLASSNAME_VISIBLE : CLASSNAME_HIDDEN;\n            }\n        }, 100);\n        _this.handleFocusEvent = _this.handleFocusEvent.bind(_this);\n        _this.handleBlurEvent = _this.handleBlurEvent.bind(_this);\n        _this.root = createDivWithHtml(TEMPLATE);\n        _this.state = _this.root.querySelector('.' + CLASSNAME_STATE);\n        _this.hotkey = _this.root.querySelector('.' + CLASSNAME_HOTKEY);\n        _this.root.className = CLASSNAME;\n        _this.setHotkeyText(config.hotkey);\n        _this.setEnabledText(config.enabled);\n        document.body.appendChild(_this.root);\n        return _this;\n    }\n    DefaultTheme.prototype.onAttach = function (target) {\n        target.addEventListener('focus', this.handleFocusEvent);\n        target.addEventListener('blur', this.handleBlurEvent);\n    };\n    DefaultTheme.prototype.onConfigurationChange = function (config) {\n        this.setHotkeyText(config.hotkey);\n        this.setEnabledText(config.enabled);\n    };\n    DefaultTheme.prototype.onDetach = function (target) {\n        target.removeEventListener('focus', this.handleFocusEvent);\n        target.removeEventListener('blur', this.handleBlurEvent);\n    };\n    DefaultTheme.prototype.onDestroy = function () {\n        if (this.root instanceof Element) {\n            this.root.remove();\n        }\n        this.root = undefined;\n        this.state = undefined;\n        this.hotkey = undefined;\n    };\n    DefaultTheme.prototype.handleFocusEvent = function () {\n        this.setVisibility(true);\n    };\n    DefaultTheme.prototype.handleBlurEvent = function () {\n        this.setVisibility(false);\n    };\n    DefaultTheme.prototype.setHotkeyText = function (hotkey) {\n        if (this.hotkey instanceof Element) {\n            this.hotkey.innerHTML = hotkey;\n        }\n    };\n    DefaultTheme.prototype.setEnabledText = function (isEnabled) {\n        if (this.state instanceof Element) {\n            this.state.innerHTML = isEnabled ? TEXT_ENABLED : TEXT_DISABLED;\n        }\n    };\n    return DefaultTheme;\n}(abstract_1.default));\nfunction createDivWithHtml(html) {\n    var el;\n    el = document.createElement('div');\n    el.innerHTML = html;\n    return el;\n}\nfunction debounce(fn, wait) {\n    var timeout;\n    return function () {\n        var context = this;\n        var args = arguments;\n        var later = function () {\n            fn.apply(context, args);\n        };\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n    };\n}\nexports.default = DefaultTheme;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ts-loader!./src/themes/default.ts\n **/","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ALPHABET = 'abgdevzTiklmnopJrstufqRySCcZwWxjh';\nvar BASE_INDEX = 4304;\nfunction convertChar(charIndex) {\n    var char = String.fromCharCode(charIndex);\n    if (ALPHABET.indexOf(char) >= 0) {\n        return BASE_INDEX + ALPHABET.indexOf(char);\n    }\n    return charIndex;\n}\nfunction isSelectionSupported(el) {\n    return (typeof el.selectionStart === 'number' && typeof el.selectionEnd === 'number');\n}\nfunction getInputSelection(el) {\n    var start = 0;\n    var end = 0;\n    if (isSelectionSupported(el)) {\n        start = el.selectionStart;\n        end = el.selectionEnd;\n    }\n    return { start: start, end: end };\n}\nfunction setInputSelection(el, offset) {\n    if (isSelectionSupported(el)) {\n        el.selectionStart = offset.start;\n        el.selectionEnd = offset.end;\n    }\n    // A little 'hack' to keep natural browser behavior while typing\n    el.blur();\n    el.focus();\n}\nfunction dispatchCustomKeypressEvent(evt, charCode) {\n    var customEvent = new KeyboardEvent('keypress', {\n        key: String.fromCharCode(charCode),\n        // keyCode: charCode,\n        // charCode: charCode,\n        code: evt.code,\n        location: evt.location,\n        repeat: evt.repeat\n    });\n    evt.target.dispatchEvent(customEvent);\n}\nfunction handleKeypress(evt) {\n    var el = evt.target;\n    var charCode = evt.key.charCodeAt(0);\n    var mappedCharCode = convertChar(charCode);\n    // Don't take any action if conversion didn't happen\n    if (charCode === mappedCharCode) {\n        return;\n    }\n    // Insert converted char\n    var sel = getInputSelection(el);\n    var val = el.value;\n    el.value =\n        val.slice(0, sel.start) +\n            String.fromCharCode(mappedCharCode) +\n            val.slice(sel.end);\n    // Move caret to correct position\n    setInputSelection(el, { start: sel.start + 1, end: sel.start + 1 });\n    dispatchCustomKeypressEvent(evt, mappedCharCode);\n}\nexports.default = handleKeypress;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ts-loader!./src/keypress.ts\n **/"],"sourceRoot":""}