!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("geokbd",[],t):"object"==typeof exports?exports.geokbd=t():e.geokbd=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){console.warn("[geokbd] - "+e)}function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return"function"!=typeof e||e.apply(null,t)!==!1}function r(e){return/^Key[A-Z]$/.test(e.code)}function a(e){return e.metaKey||e.ctrlKey||e.altKey}function s(e){e.preventDefault()}function c(e){var t=Object.keys(u.DEFAULT_CONFIG).reduce(function(t,n){return t[n]=e.hasOwnProperty(n)?e[n]:u.DEFAULT_CONFIG[n],t},{});return t}var u=n(1),f=n(2),d=n(3),l=n(4),h=function(){function e(){}return e.initialize=function(e){void 0===e&&(e={}),this.createReactiveConfig(c(e)),this.registerDefaultThemeIfRequired(),this.initializeTheme(),this.onKeydownHandler=this.onKeydownHandler.bind(this),this.initialized=!0},e.attach=function(t,n){return this.initialized?t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement?(t.GeoKBD=n,t.addEventListener("keydown",this.onKeydownHandler),void(e.activeTheme&&e.activeTheme.onAttach(t))):void o("only works for <input> and <textarea> elements."):void o("attach() can't be called until initialize().")},e.detach=function(t){delete t.GeoKBD,t.removeEventListener("keydown",this.onKeydownHandler),e.activeTheme&&e.activeTheme.onDetach(t)},e.createReactiveConfig=function(t){var n=this;this.shadowConfig=t,Object.keys(u.DEFAULT_CONFIG).forEach(function(t){Object.defineProperty(n.config,t,{get:function(){return e.shadowConfig[t]},set:function(n){e.shadowConfig[t]=n,e.activeTheme instanceof f["default"]&&e.activeTheme.onConfigurationChange(e.config)}})})},e.registerDefaultThemeIfRequired=function(){"default"===this.config.theme&&this.registerTheme("default",d["default"])},e.toggleEnabled=function(){this.config.enabled=!this.config.enabled},e.onKeydownHandler=function(e){var t=e.target.GeoKBD;if(!a(e)&&t)return this.config.hotkey===e.key?(this.toggleEnabled(),void s(e)):void(this.config.enabled&&r(e)&&i(t.beforeChange,e)&&(s(e),l["default"](e),i(t.afterChange,e)))},e.registerTheme=function(e,t){this.themes[e]=t},e["import"]=function(e){switch(e){case"themes/abstract":return f["default"];case"themes/default":return d["default"]}},e.initializeTheme=function(){var e=this.themes[this.config.theme];if("function"!=typeof e)return void o("Can't instantiate theme.");var t=new e(this.config);return t instanceof f["default"]?void(this.activeTheme=t):void o("Theme doesn't extend AbstractTheme")},e}();h.themes={},h.config=u.DEFAULT_CONFIG,h.shadowConfig={},h.initialized=!1,e.exports=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_THEME="default",t.DEFAULT_HOTKEY="~",t.DEFAULT_ENABLED=!0,t.DEFAULT_CONFIG={theme:t.DEFAULT_THEME,hotkey:t.DEFAULT_HOTKEY,enabled:t.DEFAULT_ENABLED}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){}return e}();t["default"]=n},function(e,t,n){"use strict";function o(e){var t;return t=document.createElement("div"),t.innerHTML=e,t}function i(e,t){var n;return function(){var o=this,i=arguments,r=function(){e.apply(o,i)};clearTimeout(n),n=setTimeout(r,t)}}var r=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s="ჩართულია",c="გამორთულია",u="geokbd--statusMessage",f=u+"-state",d=u+"-hotkey",l=u+" geokbd--hidden",h=u+" geokbd--visible",v=['<div class="'+u+'-text">','ქართული კლავიატურა: <u class="'+f+'"></u><br>',"ჩართვა/გამორთვა კლავიშით ('<span class=\""+d+"\"></span>')","</div>"].join(""),y=function(e){function t(t){var n=e.call(this,t)||this;return n.setVisibility=i(function(e){this.root instanceof Element&&(this.root.className=e?h:l)},100),n.handleFocusEvent=n.handleFocusEvent.bind(n),n.handleBlurEvent=n.handleBlurEvent.bind(n),n.root=o(v),n.state=n.root.querySelector("."+f),n.hotkey=n.root.querySelector("."+d),n.root.className=u,n.setHotkeyText(t.hotkey),n.setEnabledText(t.enabled),document.body.appendChild(n.root),n}return r(t,e),t.prototype.onAttach=function(e){e.addEventListener("focus",this.handleFocusEvent),e.addEventListener("blur",this.handleBlurEvent)},t.prototype.onConfigurationChange=function(e){this.setHotkeyText(e.hotkey),this.setEnabledText(e.enabled)},t.prototype.onDetach=function(e){e.removeEventListener("focus",this.handleFocusEvent),e.removeEventListener("blur",this.handleBlurEvent)},t.prototype.onDestroy=function(){this.root instanceof Element&&this.root.remove(),this.root=void 0,this.state=void 0,this.hotkey=void 0},t.prototype.handleFocusEvent=function(){this.setVisibility(!0)},t.prototype.handleBlurEvent=function(){this.setVisibility(!1)},t.prototype.setHotkeyText=function(e){this.hotkey instanceof Element&&(this.hotkey.innerHTML=e)},t.prototype.setEnabledText=function(e){this.state instanceof Element&&(this.state.innerHTML=e?s:c)},t}(a["default"]);t["default"]=y},function(e,t){"use strict";function n(e){var t=String.fromCharCode(e);return c.indexOf(t)>=0?u+c.indexOf(t):e}function o(e){return"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd}function i(e){var t=0,n=0;return o(e)&&(t=e.selectionStart,n=e.selectionEnd),{start:t,end:n}}function r(e,t){o(e)&&(e.selectionStart=t.start,e.selectionEnd=t.end),e.blur(),e.focus()}function a(e,t){var n=new KeyboardEvent("keypress",{key:String.fromCharCode(t),code:e.code,location:e.location,repeat:e.repeat});e.target.dispatchEvent(n)}function s(e){var t=e.target,o=e.key.charCodeAt(0),s=n(o);if(o!==s){var c=i(t),u=t.value;t.value=u.slice(0,c.start)+String.fromCharCode(s)+u.slice(c.end),r(t,{start:c.start+1,end:c.start+1}),a(e,s)}}Object.defineProperty(t,"__esModule",{value:!0});var c="abgdevzTiklmnopJrstufqRySCcZwWxjh",u=4304;t["default"]=s}])});
//# sourceMappingURL=geokbd.min.js.map