!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("geokbd",[],t):"object"==typeof exports?exports.geokbd=t():e.geokbd=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return"function"!=typeof e||e.apply(null,t)!==!1}function o(e){var t=Object.keys(r.DEFAULT_CONFIG).reduce(function(t,n){return t[n]=e.hasOwnProperty(n)?e[n]:r.DEFAULT_CONFIG[n],t},{});return t}var r=n(1),s=n(2),a=n(3),c=n(5),u=function(){function e(){}return e.initialize=function(e){void 0===e&&(e={}),this.createReactiveConfig(o(e)),this.registerDefaultThemeIfRequired(),this.initializeTheme(),this.initialized=!0},e.attach=function(t,n){t.addEventListener("keypress",this.prepareKeypressEvent.bind(this)),t.GeoKBD=n,e.activeTheme&&e.activeTheme.hook(t)},e.createReactiveConfig=function(t){var n=this;this.shadowConfig=t,Object.keys(r.DEFAULT_CONFIG).forEach(function(t){Object.defineProperty(n.config,t,{get:function(){return e.shadowConfig[t]},set:function(n){e.shadowConfig[t]=n,e.activeTheme instanceof s["default"]&&e.activeTheme.handleConfigChange(e.config)}})})},e.registerDefaultThemeIfRequired=function(){"default"===this.config.theme&&this.registerTheme("default",a["default"])},e.prepareKeypressEvent=function(e){if(!e.metaKey&&!e.ctrlKey){if(this.config.hotkey===String.fromCharCode(e.which))return e.preventDefault(),void(this.config.enabled=!this.config.enabled);if(this.config.enabled){var t=e.target.GeoKBD?e.target.GeoKBD.beforeCallback:null,n=e.target.GeoKBD?e.target.GeoKBD.afterCallback:null;i(t,e)&&(c["default"](e),i(n,e))}}},e.registerTheme=function(e,t){this.themes[e]=t},e["import"]=function(e){switch(e){case"themes/abstract":return s["default"];case"themes/default":return a["default"]}},e.initializeTheme=function(){var e=this.themes[this.config.theme];if("function"!=typeof e)return void console.warn("Can't instantiate theme");var t=new e(this.config);return t instanceof s["default"]?void(this.activeTheme=t):void console.warn("Theme doesn't extend AbstractTheme")},e}();u.themes={},u.config=r.DEFAULT_CONFIG,u.shadowConfig={},u.initialized=!1,e.exports=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_THEME="default",t.DEFAULT_HOTKEY="~",t.DEFAULT_ENABLED=!0,t.DEFAULT_CONFIG={theme:t.DEFAULT_THEME,hotkey:t.DEFAULT_HOTKEY,enabled:t.DEFAULT_ENABLED}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){}return e}();t["default"]=n},function(e,t,n){"use strict";function i(e){var t;return t=document.createElement("div"),t.innerHTML=e,t}var o=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(4),a="ჩართულია",c="გამორთულია",u="geokbd--statusMessage",f=u+"-state",d=u+"-hotkey",l=u+" hidden",h=u+" visible",p=['<div class="'+u+'-text">','ქართული კლავიატურა: <u class="'+f+'"></u><br>',"ჩართვა/გამორთვა კლავიშით ('<span class=\""+d+"\"></span>')","</div>"].join(""),v=function(e){function t(t){var n=e.call(this,t)||this;return n.setVisibility=s.debounce(function(e){this.root instanceof Element&&(this.root.className=e?h:l)},100),n.root=i(p),n.state=n.root.querySelector("."+f),n.hotkey=n.root.querySelector("."+d),n.setVisibility(!1),n.setHotkeyText(t.hotkey),n.setEnabledText(t.enabled),document.body.appendChild(n.root),n}return o(t,e),t.prototype.hook=function(e){e.addEventListener("focus",this.handleFocusEvent.bind(this)),e.addEventListener("blur",this.handleBlurEvent.bind(this))},t.prototype.handleConfigChange=function(e){this.setHotkeyText(e.hotkey),this.setEnabledText(e.enabled)},t.prototype.destroy=function(){this.root instanceof Element&&this.root.remove(),this.root=void 0,this.state=void 0,this.hotkey=void 0},t.prototype.handleFocusEvent=function(){this.setVisibility(!0)},t.prototype.handleBlurEvent=function(){this.setVisibility(!1)},t.prototype.setHotkeyText=function(e){this.hotkey instanceof Element&&(this.hotkey.innerHTML=e)},t.prototype.setEnabledText=function(e){this.state instanceof Element&&(this.state.innerHTML=e?a:c)},t}(r["default"]);t["default"]=v},function(e,t){"use strict";function n(e,t){var n;return function(){var i=this,o=arguments,r=function(){e.apply(i,o)};clearTimeout(n),n=setTimeout(r,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=n},function(e,t){"use strict";function n(e){var t=String.fromCharCode(e);return a.indexOf(t)>=0?c+a.indexOf(t):e}function i(e){return"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd}function o(e){var t=0,n=0;return i(e)&&(t=e.selectionStart,n=e.selectionEnd),{start:t,end:n}}function r(e,t){i(e)&&(e.selectionStart=t.start,e.selectionEnd=t.end),e.blur(),e.focus()}function s(e){var t=e.target,i=e.which,s=n(i);if(i!==s){e.preventDefault();var a=o(t),c=t.value;t.value=c.slice(0,a.start)+String.fromCharCode(s)+c.slice(a.end),r(t,{start:a.start+1,end:a.start+1})}}Object.defineProperty(t,"__esModule",{value:!0});var a="abgdevzTiklmnopJrstufqRySCcZwWxjh",c=4304;t["default"]=s}])});
//# sourceMappingURL=geokbd.min.js.map