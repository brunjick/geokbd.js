!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("geokbd",[],t):"object"==typeof exports?exports.geokbd=t():e.geokbd=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){console.warn("[geokbd] - "+e)}function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return"function"!=typeof e||e.apply(null,t)!==!1}function r(e){var t=Object.keys(s.DEFAULT_CONFIG).reduce(function(t,n){return t[n]=e.hasOwnProperty(n)?e[n]:s.DEFAULT_CONFIG[n],t},{});return t}var s=n(1),a=n(2),c=n(3),u=n(5),f=function(){function e(){}return e.initialize=function(e){void 0===e&&(e={}),this.createReactiveConfig(r(e)),this.registerDefaultThemeIfRequired(),this.initializeTheme(),this.prepareKeypressEvent=this.prepareKeypressEvent.bind(this),this.initialized=!0},e.attach=function(t,n){return this.initialized?t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement?(t.GeoKBD=n,t.addEventListener("keypress",this.prepareKeypressEvent),void(e.activeTheme&&e.activeTheme.onAttach(t))):void o("only works for <input> and <textarea> elements."):void o("attach() can't be called until initialize().")},e.detach=function(t){delete t.GeoKBD,t.removeEventListener("keypress",this.prepareKeypressEvent),e.activeTheme&&e.activeTheme.onDetach(t)},e.createReactiveConfig=function(t){var n=this;this.shadowConfig=t,Object.keys(s.DEFAULT_CONFIG).forEach(function(t){Object.defineProperty(n.config,t,{get:function(){return e.shadowConfig[t]},set:function(n){e.shadowConfig[t]=n,e.activeTheme instanceof a["default"]&&e.activeTheme.onConfigurationChange(e.config)}})})},e.registerDefaultThemeIfRequired=function(){"default"===this.config.theme&&this.registerTheme("default",c["default"])},e.prepareKeypressEvent=function(e){var t=e.target.GeoKBD?e.target.GeoKBD.beforeChange:null,n=e.target.GeoKBD?e.target.GeoKBD.afterChange:null;if(i(t,e)&&!e.metaKey&&!e.ctrlKey)return this.config.hotkey===String.fromCharCode(e.which)?(e.preventDefault(),void(this.config.enabled=!this.config.enabled)):void(this.config.enabled&&(u["default"](e),i(n,e)))},e.registerTheme=function(e,t){this.themes[e]=t},e["import"]=function(e){switch(e){case"themes/abstract":return a["default"];case"themes/default":return c["default"]}},e.initializeTheme=function(){var e=this.themes[this.config.theme];if("function"!=typeof e)return void o("Can't instantiate theme.");var t=new e(this.config);return t instanceof a["default"]?void(this.activeTheme=t):void o("Theme doesn't extend AbstractTheme")},e}();f.themes={},f.config=s.DEFAULT_CONFIG,f.shadowConfig={},f.initialized=!1,e.exports=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_THEME="default",t.DEFAULT_HOTKEY="~",t.DEFAULT_ENABLED=!0,t.DEFAULT_CONFIG={theme:t.DEFAULT_THEME,hotkey:t.DEFAULT_HOTKEY,enabled:t.DEFAULT_ENABLED}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){}return e}();t["default"]=n},function(e,t,n){"use strict";function o(e){var t;return t=document.createElement("div"),t.innerHTML=e,t}var i=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(4),a="ჩართულია",c="გამორთულია",u="geokbd--statusMessage",f=u+"-state",d=u+"-hotkey",h=u+" geokbd--hidden",l=u+" geokbd--visible",p=['<div class="'+u+'-text">','ქართული კლავიატურა: <u class="'+f+'"></u><br>',"ჩართვა/გამორთვა კლავიშით ('<span class=\""+d+"\"></span>')","</div>"].join(""),v=function(e){function t(t){var n=e.call(this,t)||this;return n.setVisibility=s.debounce(function(e){this.root instanceof Element&&(this.root.className=e?l:h)},100),n.handleFocusEvent=n.handleFocusEvent.bind(n),n.handleBlurEvent=n.handleBlurEvent.bind(n),n.root=o(p),n.state=n.root.querySelector("."+f),n.hotkey=n.root.querySelector("."+d),n.root.className=u,n.setHotkeyText(t.hotkey),n.setEnabledText(t.enabled),document.body.appendChild(n.root),n}return i(t,e),t.prototype.onAttach=function(e){e.addEventListener("focus",this.handleFocusEvent),e.addEventListener("blur",this.handleBlurEvent)},t.prototype.onConfigurationChange=function(e){this.setHotkeyText(e.hotkey),this.setEnabledText(e.enabled)},t.prototype.onDetach=function(e){e.removeEventListener("focus",this.handleFocusEvent),e.removeEventListener("blur",this.handleBlurEvent)},t.prototype.onDestroy=function(){this.root instanceof Element&&this.root.remove(),this.root=void 0,this.state=void 0,this.hotkey=void 0},t.prototype.handleFocusEvent=function(){this.setVisibility(!0)},t.prototype.handleBlurEvent=function(){this.setVisibility(!1)},t.prototype.setHotkeyText=function(e){this.hotkey instanceof Element&&(this.hotkey.innerHTML=e)},t.prototype.setEnabledText=function(e){this.state instanceof Element&&(this.state.innerHTML=e?a:c)},t}(r["default"]);t["default"]=v},function(e,t){"use strict";function n(e,t){var n;return function(){var o=this,i=arguments,r=function(){e.apply(o,i)};clearTimeout(n),n=setTimeout(r,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=n},function(e,t){"use strict";function n(e){var t=String.fromCharCode(e);return a.indexOf(t)>=0?c+a.indexOf(t):e}function o(e){return"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd}function i(e){var t=0,n=0;return o(e)&&(t=e.selectionStart,n=e.selectionEnd),{start:t,end:n}}function r(e,t){o(e)&&(e.selectionStart=t.start,e.selectionEnd=t.end),e.blur(),e.focus()}function s(e){var t=e.target,o=e.which,s=n(o);if(o!==s){e.preventDefault();var a=i(t),c=t.value;t.value=c.slice(0,a.start)+String.fromCharCode(s)+c.slice(a.end),r(t,{start:a.start+1,end:a.start+1})}}Object.defineProperty(t,"__esModule",{value:!0});var a="abgdevzTiklmnopJrstufqRySCcZwWxjh",c=4304;t["default"]=s}])});
//# sourceMappingURL=geokbd.min.js.map